# 환경 변수를 관리하는 방법

## 환경 변수를 써야하는 이유

Github와 같이 온라인에 프로젝트 소스 코드를 업로드하여 public하게 관리하는 경우 보안을 신경써야한다. 특히 database 정보나 api key와 같이 예미한 정보들은
반드시 분리해서 관리해야한다.

이때 유용하게 사용할 수 있는 것이 환경 변수이다. local 환경에서 환경 변수로 예민한 정보를 저장하고 application에서 이를 사용하면 쉽게 분리할 수 있다.

## 환경 변수 관리 방법

### 간단한 방법

shell마다 사용하는 run command 파일에 환경 변수를 저장하는 export 명령어를 작성하면 부팅할 때마다 알아서 환경 변수를 불러온다. zsh를 사용하는 경우 ~
/.zshrc에서 작성하면 된다.

### 효율적인 관리 방법

그러나 내가 관리해야할 프로젝트가 여러 개라면 하나의 run command 파일에서 관리하기란 쉽지 않다. 따라서 별도의 파일로 분리하여 관리하는 것이 좋다.

예를 들어 현재 지하철 노선 프로젝트와 쇼핑 프로젝트를 병행하여 진행하고 있다고 하자. run command 파일은 다음과 같다.

```shell
# ~/.zshrc
export SHOPPING_H2_PASSWORD=shopping
export SHOPPING_H2_USERNAME=whatasame
export SUBWAY_MYSQL_USERNAME=whatasame
export SUBWAY_MYSQL_PASSWORD=subway
export SHOPPING_CURRENCY_LAYER_SECRET=df
export SHOPPING_JWT_SECRET=poop
```

이때 쇼핑 프로젝트의 리뷰어가 프로젝트 실행을 위해 환경 변수를 요청한다면 어떨까? 순서가 뒤죽박죽인 run command 파일에서 쇼핑과 관련된 환경 변수를 찾은 후 전달해야할
것이다. 사실 이러한 작업은 처음부터 분리해서 관리했다며 일어나지 않았을 것이다.

따라서 다음과 같이 별도의 파일로 분리하여 사용하는 것이 바람직하다.

```shell
# ~/.subway.env
export SUBWAY_MYSQL_USERNAME=whatasame
export SUBWAY_MYSQL_PASSWORD=subway
```

```shell
# ~/.shopping.env
export SHOPPING_H2_PASSWORD=shopping
export SHOPPING_H2_USERNAME=whatasame
export SHOPPING_CURRENCY_LAYER_SECRET=df
export SHOPPING_JWT_SECRET=poop
```

shell run command 파일에서 경로를 지정할 때 **절대 경로**로 하는 것을 권장한다.

```shell
# ~/.zshrc
source /Users/{username}/subway.env
source /Users/{username}shopping.env
```

이렇게 분리한 상황에서 아까 같은 요구 사항이 발생한다면 shopping.env 파일만 전달해주면 된다.

## 참고 자료

[우아한테크캠프 쇼핑 미션](https://github.com/next-step/spring-shopping/pull/32#discussion_r1292119731)
