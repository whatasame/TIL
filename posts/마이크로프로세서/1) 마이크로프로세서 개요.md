# 1) 마이크로프로세서 개요

## 마이크로프로세서 vs 마이크로 컨트롤러

### 마이크로 프로세서

- 매우 작은(micro)와 프로세서(processor)의 합성어
- 크기가 매우 작으나 뛰어난 계산 능력을 가진 장치
- 작은 크기에서 처리 능력을 높이기 위해 내부 구조를 최적화

### 마이크로컨트롤러

- 매우 작은(micro)와 컨트롤러(controller)의 합성어
- 마이크로컨트롤러 = 마이크로프로세서 + 하드웨어 제어 기능
- 프로그램을 실행하면서 하드웨어 장치를 제어하기 위한 목적

## 고급 언어와 저급언어

컴퓨터는 0과 1로 이루어진 Binary 값만 읽을 수 있습니다. 사람의 생각이 컴퓨터로 수행되는 과정은 아래와 같습니다.


- 프로그램 : 작업을 처리하기 위해 명령어를 차례로 배열한 것
- 원시 프로그램 : Source code, Source program을 직역한 것
- 컴파일러 : 고급 언어로 작성된 프로그램을 기계어 목적 파일로 번역하는 과정
- 어셈블러 : 어셈블리어로 작성된 원시 프로그램을 기계어 목적 파일로 번역하는 과정
- 링크 : 여러 개의 목적 파일을 연결하여 통합된 실행 파이로 만드는 과정
- 링커 : 링크를 전담하는 프로그램
- 라이브러리
    
    공통으로 자주 사용하는 기능은 표준화된 이름과 매개 변수가 있는 함수로 작성한 후 컴파일 하여 목적 파일을 생성
    
    컴파일된 목적 파일을 모아놓은 파일을 라이브러리 파일이라고 합니다.
    
- 레지스터 : CPU의 기억 단위

## 저장형 프로그램 컴퓨터

### 저장형 프로그램 컴퓨터란

폰 노이만 아키텍쳐로 설계된 컴퓨터 모델을 저장형 프로그램이라고 합니다. Memory로부터 명령어를 읽고, CPU에서 해석하고 값을 처리한 후 다시 Memory에 저장하기 때문입니다.

### CPU-Memory 병목 현상

CPU 구조 기술이 발달함에 따라 처리되는 데이터가 많아져 Memory와 CPU 사이에서 이동하는 데이터 양이 많아졌습니다. 단일 CPU를 갖는 저장형 프로그램 컴퓨터는 Bus라는 정해진 연결선만을 통해 명령어와 데이터를 Memory에서 읽고 씁니다. 그러나 CPU와 Memory 사이의 한정된 데이터 속도로 인해 CPU 연산 능력이 향상되어도 Memory의 속도가 CPU 속도를 따라오지 못해 병목 현상이 발생합니다.

이러한 문제를 해결하기 위해 메모리 계층을 이용하거나 병렬 처리 컴퓨팅을 사용합니다.

### 메모리 계층

메모리 계층이란 메모리의 병목 현상과 메모리 속도, 속도 대비 가격을 고려하여 메모리를 계층적으로 배치한 것을 말합니다.

주 메모리(DRAM)보다 캐시 메모리(SRAM)를 CPU와 주 메모리 사이에 배치합니다.

<p align="center"><img src="../../images/마이크로프로세서/1) 마이크로프로세서 개요-Untitled.png"></p>

지역성에 의해 참조되는 데이터 영역은 특정 부위에 확률적으로 집중됩니다. 지역성 원리에 따라 곧 처리될 프로그램과 데이터 일부를 캐시 메모리에서 처리합니다.

캐시 메모리는 DRAM의 데이터 일부를 가지고 있다가 CPU가 요청한 데이터가 캐시 메모리에 없으면 DRAM에서 해당 데이터를 가져온 후 CPU에게 넘겨 줍니다.

### 가상 메모리

폰 노이만 구조에서 실행중인 프로그램은 모두 메모리에 올라와 있어야합니다. 그러나 메모리 용량보다 큰 프로그램을 실행할 필요가 있습니다. 이를 위해 가상 메모리가 탄생했다.

가상 메모리란 프로그램을 사용하는데 있어 전체 프로그램이 필요하지 않고 특정 일부 프로그램만 필요하다는 것으로부터 아이디어를 얻었습니다.

실행될 프로그램을 디스크에 저장하고 프로그램을 시작하면 사용되는 일부만 메모리에 올려서 사용합니다.

## RISC vs CISC

RISC, CISC는 명령어 집합에 따른 컴퓨터 구조입니다.

### RISC

- Reduced Instruction Set Computer
- 기존의 컴퓨터 구조를 CISC로 규정하고 CISC보다 간단한 명령어를 사용하는 컴퓨터 구조
- 파이프라인 기법을 이용하여 한 사이클에 한 명령어 실행

<p align="center"><img src="../../images/마이크로프로세서/1) 마이크로프로세서 개요-Untitled 1.png"></p>

- 고정된 짧은 길이의 명령어
    
    CPU 시스템 버스 크기와 같게 명령어 크기를 고정 → e.g. 32bit 환경에서 명령어 하나는 32bit
    
- 단순한 어드레싱 사용
    
    단순한 어드레싱 모드의 사용으로 명령어 분석 절차를 통일
    
- 간단한 연산 동작과 적은 명령어 셋
    
    명령어가 간단하여 하드웨어 복잡도가 낮음
    
    복잡한 명령어는 간단한 명령어들의 조합으로 구현
    
- 선인출(Pre-fetch)와 예측 실행
    
    Branch 명령은 파이프라인의 최종 단계까지 실행되어야만 다음 명령어의 위치를 확인 가능
    
    다음에 실행될 명령어 위치가 늦게 결정되어도 연속된 명령어가 결정될 것으로 예측하여 선인출
    
    연속된 명령어로 분기 위치가 결정되면 수행된 파이프라인 단계만큼 시간을 절약
    

### CISC

- Complex Instruction Set Computer
- RISC가 탄생함으로써 이름이 붙은 컴퓨터 구조
- 가변 길이의 명령어 형식
- 명령어의 길이가 김
- 다양한 어드레싱 모드 사용
- 복잡한 연산 동작을 수행할 수 있는 다양한 명령어로 구성
- 복잡한 명령어를 사용하지만 RISC에 비해 전체 명령어 수가 적음