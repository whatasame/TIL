# #011 개념적 설계 - ER 모델 소개

이 글에서는 개념적 설계의 ER 모델에 대해 알아보도록 하겠습니다.

## ER 모델이란

ER 모델은 특정 시스템의 요구 사항을 구성하는 개체와 관계, 그리고 속성들을 도형으로 표현한 데이터 모델을 말합니다.

### 용어

ER 모델에서 사용되는 용어는 다음과 같습니다.

- 개체$^{entity}$
- 속성$^{attribute}$ : 개체를 표현하기 위해 사용하는 속성
- 관계$^{relationship}$ : 둘 이상의 서로 다른 개체를 연결한 것

### 개체

개체는 데이터베이스에서 표현해야하는 핵심적인 사물이나 개념을 말합니다. 예를 들어 회사 데이터 베이스가 있을 때, 회사에서 핵심적인 사원, 부서, 프로젝트와 같은 것들이 개체로 표현될 수 있습니다.

### 속성

속성은 개체를 표현하기 위해 사용하는 속성입니다. 즉, 속성들의 값에 의해 개체가 구분되는 것이죠. 예를 들어, 사원은 (이름, 주민번호, 주소, 성별, 생일)로 표현하고 구분됩니다. 

개체의 속성에 대해, 특정 개체는 각 속성의 값을 가질 수 있습니다. 또, 값이 없는 속성인 null 속성이 있을 수도 있습니다.

정리하면 개체는 여러 개의 속성을 가집니다. 이를 다르게 생각하면 각 속성은 여러 개의 값(Value set, domain, Data type)을 갖는다고 생각할 수 있습니다.

### 관계

ㅁㄴㅇㄹ

## 개체 용어 정리

- Entitiy : instance
- Entitiy set : set of entitiy
- Entitiy type : 공통 속성(데이터)을 갖는 개체들의 집합으로서 이름과 속성 리스트를 가짐

<p align="center"><img src="../../images/데이터베이스/%23011%20%EA%B0%9C%EB%85%90%EC%A0%81%20%EC%84%A4%EA%B3%84%20-%20ER%20%EB%AA%A8%EB%8D%B8%20%EC%86%8C%EA%B0%9C/Untitled.png"></p>

위 그림에서..

- Entitiy : $e_1,\ e_2,\ e_3,\ c_1,\ c_2\ ...$
- Entitiy set : $\{e_1,\ e_2,\ e_3,\ ...\},\ \{c_1,\ c_2,\ ...\}$
- Entitiy type : $\tt EMPLOYEE(Name,\ Age,\ Salary),\ COMPANY(Name,\ Headquarters,\ President)$

## 속성의 분류

### 단순 속성과 복합 속성

- 단순 속성 : 더 이상의 작은 요소로 분할할 수 없는 속성
- 복합 속성 : 몇 개의 더 작은 속성들로 분할할 수 있는 속성

<p align="center"><img src="../../images/데이터베이스/%23011%20%EA%B0%9C%EB%85%90%EC%A0%81%20%EC%84%A4%EA%B3%84%20-%20ER%20%EB%AA%A8%EB%8D%B8%20%EC%86%8C%EA%B0%9C/Untitled%201.png"></p>

예를 들어, 사원 개체의 속성에 주소라는 속성이 있을 때 주소 속성은 더 작은 속성들로 분할할 수 있으므로 복합 속성이 됩니다.

- 복합 속성 : 주소, 동(면)번지
- 단순 속성 : 도, 시(군, 읍), 우편 번호, 동(면), 번지, 아파트 번호

> 논리적 설계를 관계형 모델로 하면 복합 속성을 사용할 수 없습니다. 그러므로 복합 속성을 단순하게 변경해야합니다. 단순하게 바꾸는 방법은 2가지가 있습니다. 우선, 주소를 하나의 긴 문자열로 사용하고 주소 속성을 사용하는 방법이 있습니다. 다른 방법은 주소 속성을 여러 속성으로 쪼개 속성 별로 각 값을 저장하는 방법이 있습니다. 예를 들어, 서울특별시 중구 세종대로 110를 (서울특별시 중구 세종대로 110)으로 저장하거나 (서울특별시, 중구, 세종대로, 110)으로 저장하는 식으로 말이죠. 선택하는 것은 설계자의 몫입니다. 전체 주소를 사용할 경우가 많은 경우 전자를 택할 것이고, 개별 주소를 사용할 경우가 많은 경우 후자를 택할 것입니다.
> 

### 단일 값 속성과 다중 값 속성

- 단일 값 속성 : 하나의 값을 가지는 속성
- 다중 값 속성 : 여러 개의 값을 가지는 속성

### 복합 속성과 다중 값 속성의 차이

<p align="center"><img src="../../images/데이터베이스/%23011%20%EA%B0%9C%EB%85%90%EC%A0%81%20%EC%84%A4%EA%B3%84%20-%20ER%20%EB%AA%A8%EB%8D%B8%20%EC%86%8C%EA%B0%9C/Untitled%202.png"></p>

- 복합 속성 : 속성이 더 작은 속성을 나눌 수 있는 경우 → 주소
- 다중 값 속성 : 하나의 속성에서 값을 여러개 가지는 경우 → 취미 속성에 여러 취미

복합 속성이면서 다중 값 속성인 경우도 있습니다. 학생의 이전학위(대학, 연도, 학위명, 분야) 속성의 경우 이전 학위에 학사, 석사, 박사가 올 수 있으므로 **복합 속성**입니다. 또한, 각 학위 속성에 대하여 (대학, 연도, 학위명, 분야)에 해당하는 여러 값이 있으므로 **다중 값 속성**입니다.

### Null 속성

Null 속성은 값이 입력되지 않아 값이 없는 속성을 말합니다.

### 유도 속성

유도 속성은 다른 속성의 값을 이용하여 유도할 수 있는 속성을 말합니다. 

예를 들어, 사원 개체에 주민번호 속성과 나이 속성이 있을 때, 나이 속성은 주민번호 속성으로 계산할 수 있습니다. 따라서, 사원의 나이는 테이블에 나이 속성이 없어도 구할 수 있는 것이죠.

다만, 나이 속성을 별도로 둘 것인지 나이 속성을 주민번호 속성을 통해 유도할 것인지 결정하는 것도 설계자의 몫입니다. 데이터베이스를 사용할 때 나이 정보를 자주 사용하지 않는다면 나이 속성을 없애고 저장 공간을 아낄 것이고, 나이 정보를 자주 사용한다면 나이 속성을 별도로 두어 연산량을 줄여 시스템 성능을 빠르게 할 것입니다.

## Key 속성

Key 속성이란 Entitiy set에 포함된 속성 중 특정 개체를 식별하는 속성들의 집합을 말합니다. 즉, Key는 하나의 속성일 수도, 여러 개의 속성일 수도 있습니다.

### 유일성과 최소성

Key에는 유일성과 최소성이라는 성질이 있습니다. 이러한 성질을 만족하는 Key에 따라 다르게 구분합니다.

- 유일성$^{uniqueness}$ : 키를 구성하는 속성으로 개체를 구분할 수 있는 상태
    
    유일성을 만족하는 키는 군더더기 속성이 있을 수 있습니다.
    
    e.g. 주민번호, (주민번호, 이름), (주민번호, 이름, 주소) → 이름, 주소는 군더더기 속성
    
- 최소성$^{minimality}$ : 키를 구성하는 속성들 중 하나를 제거하면 키의 성질을 잃어버리는 상태
    
    최소성을 만족하는 키는 군더더기 속성이 없습니다.
    
    e.g. (학번, 대학) → 학번이나 대학 중 하나의 속성을 제거하면 전국 학생을 구분할 수 없음
    

<p align="center"><img src="../../images/데이터베이스/%23011%20%EA%B0%9C%EB%85%90%EC%A0%81%20%EC%84%A4%EA%B3%84%20-%20ER%20%EB%AA%A8%EB%8D%B8%20%EC%86%8C%EA%B0%9C/Untitled%203.png"></p>

### 슈퍼 키

슈퍼 키$^{super\ key}$는 유일성을 만족하는 속성들의 집합입니다. 

따라서, 군더더기 속성들이 포함될 수 있습니다. (최소성을 만족하지 않음)

### 후보 키

후보 키$^{candidate\ key}$는 유일성과 최소성을 만족하는 속성들의 집합입니다.

### 주 키(기본 키)

주 키$^{primary\ key}$는 가장 많이 사용될 것 같은 후보 키를 하나 선택한 것입니다.

> **모든 개체는 주 키를 가질까요?** 정답은 모른다입니다. 논리적 설계에 사용되는 관계형 모델에서는 하나의 테이블 안에서 중복된 레코드가 없습니다. 따라서 반드시 주 키를 가져야합니다. 그러나 개념적 설계에 사용되는 ER 모델에서는 이러한 제약 조건이 없습니다. 따라서 주 키가 없는 개체가 있을 수 있습니다. 이때, 주 키가 없는 개체를 Weak Entitiy라고 합니다.
> 

### 대체 키

대체 키는 후보 키 중 선택을 받지 못한 키입니다.

## Value set(Domain) of attribute

asdf